(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{29:function(t,e,n){},30:function(t,e,n){},53:function(t,e,n){"use strict";n.r(e);var r=n(2),s=n.n(r),c=n(22),i=n.n(c),o=(n(29),n(7)),a=n(8),h=n(13),u=n(3),l=n(4),j=n(6),b=n(5),d=(n(30),n(23)),O=n.n(d),S="react",f="https://hn.algolia.com/api/v1",p="/search",m="query=",v="hitsPerPage=10",y="page=",x=n(0),g=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.input&&this.input.focus()}},{key:"render",value:function(){var t=this,e=this.props,n=e.value,r=e.onChange,s=e.children,c=e.onSubmit;return Object(x.jsx)("form",{onSubmit:c,children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("label",{children:[s,":"]}),Object(x.jsx)("br",{}),Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)("input",{type:"text",value:n,onChange:r,ref:function(e){return t.input=e}}),Object(x.jsx)("button",{type:"submit",children:"Search"})]})]})})}}]),n}(s.a.Component),T=n(10),K=function(t){var e=t.onClick,n=t.className,r=t.children;return Object(x.jsx)("button",{onClick:e,className:n,type:"button",children:r})};K.defaultProps={className:""};var C=K,k=n(24),N=n.n(k),w=function(t){var e=t.sortKey,n=t.activeSortKey,r=t.onSort,s=t.children,c=N()("button-inline",{"button-active":e===n});return Object(x.jsx)(C,{onClick:function(){return r(e)},className:c,children:s})},D=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t)).onSort=function(t){var e=r.state.sortKey===t&&!r.state.isSortReverse;r.setState({sortKey:t,isSortReverse:e})},r.state={sortKey:"NONE",isSortReverse:!1},r.onSort=r.onSort.bind(Object(T.a)(r)),r}return Object(l.a)(n,[{key:"render",value:function(){var t=this.props,e=t.list,n=t.onDismiss,r=t.isFetching,s=t.fetchStories,c=t.currentSearchTerm,i=t.page,o=(t.onSort,t.sorts),a=this.state,h=a.sortKey,u=a.isSortReverse,l=o[h](e),j=u?l.reverse():l;return Object(x.jsxs)("div",{style:{marginTop:"30px",transition:r?"":"transform .3s",transform:r?"scale(0)":"scale(1)"},children:[Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:Object(x.jsx)(w,{sortKey:"TITLE",onSort:this.onSort,activeSortKey:h,children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"})}),Object(x.jsx)("th",{children:Object(x.jsx)(w,{sortKey:"AUTHOR",onSort:this.onSort,activeSortKey:h,children:"\u0410\u0432\u0442\u043e\u0440"})}),Object(x.jsx)("th",{children:Object(x.jsx)(w,{sortKey:"COMMENTS",onSort:this.onSort,activeSortKey:h,children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"})}),Object(x.jsx)("th",{children:Object(x.jsx)(w,{sortKey:"POINTS",onSort:this.onSort,activeSortKey:h,children:"\u041e\u0447\u043a\u0438"})}),Object(x.jsx)("th",{children:"Options"})]})}),Object(x.jsx)("tbody",{children:j.slice(-10).map((function(t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"20%"},children:Object(x.jsx)("a",{href:t.url,children:t.title})}),Object(x.jsx)("td",{style:{width:"40%"},children:t.author}),Object(x.jsx)("td",{style:{width:"10%"},children:t.num_comments}),Object(x.jsx)("td",{style:{width:"10%"},children:t.points}),Object(x.jsx)("td",{style:{width:"20%"},children:Object(x.jsx)(C,{onClick:function(){return n(t.objectID)},children:"\u041e\u0442\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})})]},t.objectID)}))})]}),Object(x.jsx)(C,{onClick:function(){return s(c,i+1)},children:"More Stories"})]})}}]),n}(s.a.Component),F=function(){return Object(x.jsx)("div",{style:{textAlign:"center"},children:Object(x.jsx)("img",{src:"https://miro.medium.com/max/978/0*cWpsf9D3g346Va20.gif",alt:"loading"})})},M=n(9),I={NONE:function(t){return t},TITLE:function(t){return Object(M.sortBy)(t,"title")},AUTHOR:function(t){return Object(M.sortBy)(t,"author")},COMMENTS:function(t){return Object(M.sortBy)(t,"num_comments").reverse()},POINTS:function(t){return Object(M.sortBy)(t,"points").reverse()}},E=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t))._isMounted=!1,r.needsToSearchTopStories=function(t){return!r.state.results[t]},r.setSearchTopStories=function(t){var e=t.hits,n=t.page;r.setState((function(t){var r=t.searchKey,s=t.results,c=s&&s[r]?s[r].hits:[],i=[].concat(Object(h.a)(c),Object(h.a)(e));return{results:Object(a.a)(Object(a.a)({},s),{},Object(o.a)({},r,{hits:i,page:n})),isFetching:!1}}))},r.onDismiss=function(t){var e=r.state,n=e.searchKey,s=e.results,c=s[n],i=c.hits,h=c.page,u=i.filter((function(e){return e.objectID!==t}));r.setState({results:Object(a.a)(Object(a.a)({},s),{},Object(o.a)({},n,{hits:u,page:h}))})},r.onSearchChange=function(t){return r.setState({searchTerm:t.target.value})},r.fetchSearchTopStories=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r.setState({isFetching:!0}),O()("".concat(f,"/").concat(p,"?").concat(m).concat(t,"&").concat(v,"&").concat(y).concat(e)).then((function(t){r._isMounted&&r.setSearchTopStories(t.data)})).catch((function(t){return r._isMounted&&r.setState({error:t,isFetching:!1})}))},r.onSearchSubmit=function(t){var e=r.state.searchTerm;r.setState({searchKey:e}),r.needsToSearchTopStories(e)&&r.fetchSearchTopStories(e),r.setState({searchTerm:""}),t.preventDefault()},r.state={results:null,searchKey:"",searchTerm:"",isFetching:!1,error:null},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.setState({searchKey:S}),this.fetchSearchTopStories(S)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this.state,e=t.searchTerm,n=t.results,r=t.searchKey,s=t.error,c=n&&n[r]&&n[r].page||0,i=n&&n[r]&&n[r].hits||[];return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(g,{value:e,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit,children:"Search by title"}),this.state.isFetching&&Object(x.jsx)(F,{}),n&&Object(x.jsx)(D,{list:i,onDismiss:this.onDismiss,isFetching:this.state.isFetching,fetchStories:this.fetchSearchTopStories,currentSearchTerm:r,page:c,onSort:this.onSort,sorts:I}),s&&Object(x.jsx)("p",{style:{textAlign:"center"},children:"Sorry, something went wrong!"})]})}}]),n}(r.Component),P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(e){var n=e.getCLS,r=e.getFID,s=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),s(t),c(t),i(t)}))};i.a.render(Object(x.jsx)(E,{}),document.getElementById("root")),P()}},[[53,1,2]]]);
//# sourceMappingURL=main.8ec9e001.chunk.js.map