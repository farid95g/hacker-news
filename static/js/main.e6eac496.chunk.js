(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var r=n(2),s=n.n(r),c=n(21),i=n.n(c),o=(n(27),n(3)),a=n(4),h=n(12),u=n(6),l=n(7),j=n(9),b=n(8),d=(n(28),n(22)),O=n.n(d),S="react",f="https://hn.algolia.com/api/v1",p="/search",m="query=",y="hitsPerPage=10",x="page=",v=n(0),g=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.input&&this.input.focus()}},{key:"render",value:function(){var t=this,e=this.props,n=e.value,r=e.onChange,s=e.children,c=e.onSubmit;return Object(v.jsx)("form",{onSubmit:c,children:Object(v.jsxs)("div",{children:[Object(v.jsxs)("label",{children:[s,":"]}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)("input",{type:"text",value:n,onChange:r,ref:function(e){return t.input=e}}),Object(v.jsx)("button",{type:"submit",children:"Search"})]})]})})}}]),n}(s.a.Component),T=function(t){var e=t.onClick,n=t.className,r=t.children;return Object(v.jsx)("button",{onClick:e,className:n,type:"button",children:r})};T.defaultProps={className:""};var C=T,K=function(t){var e=t.sortKey,n=t.onSort,r=t.children;return Object(v.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return n(e)},children:r})},k=function(t){var e=t.list,n=t.onDismiss,r=t.isFetching,s=t.fetchStories,c=t.currentSearchTerm,i=t.page,o=t.sortKey,a=t.onSort,h=t.sorts,u=t.isSortReverse,l=h[o](e),j=u?l.reverse():l;return Object(v.jsxs)("div",{style:{marginTop:"30px",transition:r?"":"transform .3s",transform:r?"scale(0)":"scale(1)"},children:[Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:Object(v.jsx)(K,{sortKey:"TITLE",onSort:a,children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"})}),Object(v.jsx)("th",{children:Object(v.jsx)(K,{sortKey:"AUTHOR",onSort:a,children:"\u0410\u0432\u0442\u043e\u0440"})}),Object(v.jsx)("th",{children:Object(v.jsx)(K,{sortKey:"COMMENTS",onSort:a,children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"})}),Object(v.jsx)("th",{children:Object(v.jsx)(K,{sortKey:"POINTS",onSort:a,children:"\u041e\u0447\u043a\u0438"})}),Object(v.jsx)("th",{children:"Options"})]})}),Object(v.jsx)("tbody",{children:j.slice(-10).map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{style:{width:"20%"},children:Object(v.jsx)("a",{href:t.url,children:t.title})}),Object(v.jsx)("td",{style:{width:"40%"},children:t.author}),Object(v.jsx)("td",{style:{width:"10%"},children:t.num_comments}),Object(v.jsx)("td",{style:{width:"10%"},children:t.points}),Object(v.jsx)("td",{style:{width:"20%"},children:Object(v.jsx)(C,{onClick:function(){return n(t.objectID)},children:"\u041e\u0442\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})})]},t.objectID)}))})]}),Object(v.jsx)(C,{onClick:function(){return s(c,i+1)},children:"More Stories"})]})},w=function(){return Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)("img",{src:"https://miro.medium.com/max/978/0*cWpsf9D3g346Va20.gif",alt:"loading"})})},D=n(5),F={NONE:function(t){return t},TITLE:function(t){return Object(D.sortBy)(t,"title")},AUTHOR:function(t){return Object(D.sortBy)(t,"author")},COMMENTS:function(t){return Object(D.sortBy)(t,"num_comments").reverse()},POINTS:function(t){return Object(D.sortBy)(t,"points").reverse()}},M=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t))._isMounted=!1,r.needsToSearchTopStories=function(t){return!r.state.results[t]},r.setSearchTopStories=function(t){var e=t.hits,n=t.page,s=r.state,c=s.searchKey,i=s.results,u=i&&i[c]?i[c].hits:[],l=[].concat(Object(h.a)(u),Object(h.a)(e));r.setState({results:Object(a.a)(Object(a.a)({},i),{},Object(o.a)({},c,{hits:l,page:n})),isFetching:!1})},r.onDismiss=function(t){var e=r.state,n=e.searchKey,s=e.results,c=s[n],i=c.hits,h=c.page,u=i.filter((function(e){return e.objectID!==t}));r.setState({results:Object(a.a)(Object(a.a)({},s),{},Object(o.a)({},n,{hits:u,page:h}))})},r.onSearchChange=function(t){return r.setState({searchTerm:t.target.value})},r.fetchSearchTopStories=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r.setState({isFetching:!0}),O()("".concat(f,"/").concat(p,"?").concat(m).concat(t,"&").concat(y,"&").concat(x).concat(e)).then((function(t){r._isMounted&&r.setSearchTopStories(t.data)})).catch((function(t){return r._isMounted&&r.setState({error:t,isFetching:!1})}))},r.onSearchSubmit=function(t){var e=r.state.searchTerm;r.setState({searchKey:e}),r.needsToSearchTopStories(e)&&r.fetchSearchTopStories(e),r.setState({searchTerm:""}),t.preventDefault()},r.onSort=function(t){var e=r.state.sortKey===t&&!r.state.isSortReverse;r.setState({sortKey:t,isSortReverse:e})},r.state={results:null,searchKey:"",searchTerm:"",isFetching:!1,error:null,sortKey:"NONE",isSortReverse:!1},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.setState({searchKey:S}),this.fetchSearchTopStories(S)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this.state,e=t.searchTerm,n=t.results,r=t.searchKey,s=t.error,c=t.sortKey,i=t.isSortReverse,o=n&&n[r]&&n[r].page||0,a=n&&n[r]&&n[r].hits||[];return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(g,{value:e,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit,children:"Search by title"}),this.state.isFetching&&Object(v.jsx)(w,{}),n&&Object(v.jsx)(k,{list:a,onDismiss:this.onDismiss,isFetching:this.state.isFetching,fetchStories:this.fetchSearchTopStories,currentSearchTerm:r,page:o,sortKey:c,onSort:this.onSort,sorts:F,isSortReverse:i}),s&&Object(v.jsx)("p",{style:{textAlign:"center"},children:"Sorry, something went wrong!"})]})}}]),n}(r.Component),N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(e){var n=e.getCLS,r=e.getFID,s=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),s(t),c(t),i(t)}))};i.a.render(Object(v.jsx)(M,{}),document.getElementById("root")),N()}},[[51,1,2]]]);
//# sourceMappingURL=main.e6eac496.chunk.js.map