(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n(16),r=n.n(s),i=(n(26),n(3)),a=n(4),o=n(7),h=n(17),l=n(18),u=n(21),j=n(20),b=(n(27),n(0)),d=function(e){var t=e.value,n=e.onChange,c=e.children,s=e.onSubmit;return Object(b.jsx)("form",{onSubmit:s,children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("label",{children:[c,":"]}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(b.jsx)("input",{type:"text",value:t,onChange:n}),Object(b.jsx)("button",{type:"submit",children:"Search"})]})]})})},O=function(e){var t=e.onClick,n=e.className,c=void 0===n?"":n,s=e.children;return Object(b.jsx)("button",{onClick:t,className:c,type:"button",children:s})},m=function(e){var t=e.list,n=e.onDismiss,c=e.isFetching,s=e.fetchStories,r=e.currentSearchTerm,i=e.page;return Object(b.jsxs)("div",{style:{marginTop:"30px",transition:c?"":"transform .3s",transform:c?"scale(0)":"scale(1)"},children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Title"}),Object(b.jsx)("th",{children:"Author"}),Object(b.jsx)("th",{children:"Comments number"}),Object(b.jsx)("th",{children:"Points"}),Object(b.jsx)("th",{children:"Options"})]})}),Object(b.jsx)("tbody",{children:t.slice(-10).map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{style:{width:"20%"},children:Object(b.jsx)("a",{href:e.url,children:e.title})}),Object(b.jsx)("td",{style:{width:"40%"},children:e.author}),Object(b.jsx)("td",{style:{width:"10%"},children:e.num_comments}),Object(b.jsx)("td",{style:{width:"10%"},children:e.points}),Object(b.jsx)("td",{style:{width:"20%"},children:Object(b.jsx)(O,{onClick:function(){return n(e.objectID)},children:"\u041e\u0442\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})})]},e.objectID)}))})]}),Object(b.jsx)(O,{onClick:function(){return s(r,i+1)},children:"More Stories"})]})},f=function(){return Object(b.jsx)("div",{style:{textAlign:"center"},children:Object(b.jsx)("img",{src:"https://miro.medium.com/max/978/0*cWpsf9D3g346Va20.gif",alt:"loading"})})},p=n(19),S=n.n(p),x="react",g="https://hn.algolia.com/api/v1",v="/search",y="query=",T="hitsPerPage=10",C="page=",w=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e))._isMounted=!1,c.needsToSearchTopStories=function(e){return!c.state.results[e]},c.setSearchTopStories=function(e){var t=e.hits,n=e.page,s=c.state,r=s.searchKey,h=s.results,l=h&&h[r]?h[r].hits:[],u=[].concat(Object(o.a)(l),Object(o.a)(t));c.setState({results:Object(a.a)(Object(a.a)({},h),{},Object(i.a)({},r,{hits:u,page:n}))})},c.onDismiss=function(e){var t=c.state,n=t.searchKey,s=t.results,r=s[n],o=r.hits,h=r.page,l=o.filter((function(t){return t.objectID!==e}));c.setState({results:Object(a.a)(Object(a.a)({},s),{},Object(i.a)({},n,{hits:l,page:h}))})},c.onSearchChange=function(e){return c.setState({searchTerm:e.target.value})},c.fetchSearchTopStories=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c.setState({isFetching:!0}),S()("".concat(g,"/").concat(v,"?").concat(y).concat(e,"&").concat(T,"&").concat(C).concat(t)).then((function(e){c._isMounted&&c.setSearchTopStories(e.data),c._isMounted&&c.setState({isFetching:!1})})).catch((function(e){return c._isMounted&&c.setState({error:e,isFetching:!1})}))},c.onSearchSubmit=function(e){var t=c.state.searchTerm;c.setState({searchKey:t}),c.needsToSearchTopStories(t)&&c.fetchSearchTopStories(t),c.setState({searchTerm:""}),e.preventDefault()},c.state={results:null,searchKey:"",searchTerm:"",isFetching:!1,error:null},c}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.setState({searchKey:x}),this.fetchSearchTopStories(x)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.searchTerm,n=e.results,c=e.searchKey,s=e.error,r=n&&n[c]&&n[c].page||0,i=n&&n[c]&&n[c].hits||[];return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(d,{value:t,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit,children:"Search by title"}),this.state.isFetching&&Object(b.jsx)(f,{}),n&&Object(b.jsx)(m,{list:i,onDismiss:this.onDismiss,isFetching:this.state.isFetching,fetchStories:this.fetchSearchTopStories,currentSearchTerm:c,page:r}),s&&Object(b.jsx)("p",{style:{textAlign:"center"},children:"Sorry, something went wrong!"})]})}}]),n}(c.Component),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),r(e),i(e)}))};r.a.render(Object(b.jsx)(w,{}),document.getElementById("root")),F()}},[[48,1,2]]]);
//# sourceMappingURL=main.b8b1e737.chunk.js.map