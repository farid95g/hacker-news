(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{15:function(t,e,c){},16:function(t,e,c){},18:function(t,e,c){"use strict";c.r(e);var n=c(1),s=c(6),r=c.n(s),i=(c(15),c(2)),a=c(3),h=c(5),o=c(7),l=c(8),j=c(10),u=c(9),b=(c(16),c(0)),d=function(t){var e=t.value,c=t.onChange,n=t.children,s=t.onSubmit;return Object(b.jsx)("form",{onSubmit:s,children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("label",{children:[n,":"]}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",value:e,onChange:c}),Object(b.jsx)("button",{type:"submit",children:"Search"})]})})},O=function(t){var e=t.onClick,c=t.className,n=void 0===c?"":c,s=t.children;return Object(b.jsx)("button",{onClick:e,className:n,type:"button",children:s})},f=function(t){var e=t.list,c=t.onDismiss,n=t.isFetching,s=t.fetchStories,r=t.currentSearchTerm,i=t.page;return Object(b.jsxs)("div",{style:{marginTop:"30px",transition:n?"":"transform .3s",transform:n?"scale(0)":"scale(1)"},children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Title"}),Object(b.jsx)("th",{children:"Author"}),Object(b.jsx)("th",{children:"Comments number"}),Object(b.jsx)("th",{children:"Points"}),Object(b.jsx)("th",{children:"Options"})]})}),Object(b.jsx)("tbody",{children:e.slice(-10).map((function(t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{style:{width:"20%"},children:Object(b.jsx)("a",{href:t.url,children:t.title})}),Object(b.jsx)("td",{style:{width:"40%"},children:t.author}),Object(b.jsx)("td",{style:{width:"10%"},children:t.num_comments}),Object(b.jsx)("td",{style:{width:"10%"},children:t.points}),Object(b.jsx)("td",{style:{width:"20%"},children:Object(b.jsx)(O,{onClick:function(){return c(t.objectID)},children:"\u041e\u0442\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})})]},t.objectID)}))})]}),Object(b.jsx)(O,{onClick:function(){return s(r,i+1)},children:"More Stories"})]})},m=function(){return Object(b.jsx)("div",{style:{textAlign:"center"},children:Object(b.jsx)("img",{src:"https://miro.medium.com/max/978/0*cWpsf9D3g346Va20.gif",alt:"loading"})})},S="react",p="https://hn.algolia.com/api/v1",g="/search",x="query=",v="hitsPerPage=10",y="page=",T=function(t){Object(j.a)(c,t);var e=Object(u.a)(c);function c(t){var n;return Object(o.a)(this,c),(n=e.call(this,t)).needsToSearchTopStories=function(t){return!n.state.results[t]},n.setSearchTopStories=function(t){var e=t.hits,c=t.page,s=n.state,r=s.searchKey,o=s.results,l=o&&o[r]?o[r].hits:[],j=[].concat(Object(h.a)(l),Object(h.a)(e));n.setState({results:Object(a.a)(Object(a.a)({},o),{},Object(i.a)({},r,{hits:j,page:c}))})},n.onDismiss=function(t){var e=n.state,c=e.searchKey,s=e.results,r=s[c],h=r.hits,o=r.page,l=h.filter((function(e){return e.objectID!==t}));n.setState({results:Object(a.a)(Object(a.a)({},s),{},Object(i.a)({},c,{hits:l,page:o}))})},n.onSearchChange=function(t){return n.setState({searchTerm:t.target.value})},n.fetchSearchTopStories=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n.setState({isFetching:!0}),fetch("".concat(p,"/").concat(g,"?").concat(x).concat(t,"&").concat(v,"&").concat(y).concat(e)).then((function(t){return t.json()})).then((function(t){n.setSearchTopStories(t),n.setState({isFetching:!1}),console.log(t)})).catch((function(t){return t}))},n.onSearchSubmit=function(t){var e=n.state.searchTerm;n.setState({searchKey:e}),n.needsToSearchTopStories(e)&&n.fetchSearchTopStories(e),n.setState({searchTerm:""}),t.preventDefault()},n.state={results:null,searchKey:"",searchTerm:"",isFetching:!1},n}return Object(l.a)(c,[{key:"componentDidMount",value:function(){this.setState({searchKey:S}),this.fetchSearchTopStories(S)}},{key:"render",value:function(){var t=this.state,e=t.searchTerm,c=t.results,n=t.searchKey,s=c&&c[n]&&c[n].page||0,r=c&&c[n]&&c[n].hits||[];return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(d,{value:e,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit,children:"Search by title"}),this.state.isFetching&&Object(b.jsx)(m,{}),c&&Object(b.jsx)(f,{list:r,onDismiss:this.onDismiss,isFetching:this.state.isFetching,fetchStories:this.fetchSearchTopStories,currentSearchTerm:n,page:s})]})}}]),c}(n.Component),C=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,19)).then((function(e){var c=e.getCLS,n=e.getFID,s=e.getFCP,r=e.getLCP,i=e.getTTFB;c(t),n(t),s(t),r(t),i(t)}))};r.a.render(Object(b.jsx)(T,{}),document.getElementById("root")),C()}},[[18,1,2]]]);
//# sourceMappingURL=main.216f72a8.chunk.js.map